
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Surveillance - Smoula Verger Pro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script>
    function toggleProduits() {
      var type = document.getElementById("type_probleme").value;
      var produitsSection = document.getElementById("produit_section");

      if (type === "maladies" || type === "insectes" || type === "fertilisation") {
        produitsSection.style.display = "block";

        var produits = {
          "maladies": ["Fongicide A", "Fongicide B", "Soufre liquide"],
          "insectes": ["Insecticide X", "Insecticide Y", "Huile blanche"],
          "fertilisation": ["Engrais NPK", "Compost organique", "Azote foliaire"]
        };

        var select = document.getElementById("produit");
        select.innerHTML = "";
        produits[type].forEach(function(p) {
          var opt = document.createElement("option");
          opt.value = p;
          opt.innerHTML = p;
          select.appendChild(opt);
        });
      } else {
        produitsSection.style.display = "none";
      }
    }
  </script>
</head>
<body class="bg-light">
<div class="container py-5">
  <h2 class="text-success mb-4">ğŸ“¸ Surveillance - Nouvelle Observation</h2>
  <form method="post" enctype="multipart/form-data" action="/add_observation">
    <div class="mb-3">
      <label for="parcelle" class="form-label">ğŸ“ Parcelle</label>
      <select name="parcelle" class="form-select" required>
        <option value="P1">P1</option>
        <option value="P2">P2</option>
        <option value="P3">P3</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="date" class="form-label">ğŸ“… Date</label>
      <input type="date" name="date" class="form-control" required>
    </div>

    <div class="mb-3">
      <label for="type_probleme" class="form-label">âš ï¸ Type de problÃ¨me</label>
      <select name="type_probleme" id="type_probleme" class="form-select" onchange="toggleProduits()" required>
        <option value="">-- Choisir --</option>
        <option value="maladies">ğŸŒ¿ Maladies des plantes</option>
        <option value="insectes">ğŸ› ProblÃ¨mes d'insectes</option>
        <option value="fertilisation">ğŸŒ± Fertilisation</option>
        <option value="eau">ğŸ’§ ProblÃ¨mes d'eau</option>
        <option value="autres">â— Autres</option>
      </select>
    </div>

    <div class="mb-3" id="produit_section" style="display:none;">
      <label for="produit" class="form-label">ğŸ’¡ Produit recommandÃ©</label>
      <select name="produit" id="produit" class="form-select">
        <!-- Options gÃ©nÃ©rÃ©es dynamiquement -->
      </select>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">ğŸ“ Description</label>
      <textarea name="description" class="form-control" rows="3" required></textarea>
    </div>

    <div class="mb-3">
      <label for="recommandation" class="form-label">ğŸ§  Recommandation</label>
      <textarea name="recommandation" class="form-control" rows="2"></textarea>
    </div>

    <div class="mb-3">
      <label for="photo" class="form-label">ğŸ“· Photo (ou camÃ©ra)</label>
      <input type="file" name="photo" accept="image/*" capture="environment" class="form-control">
    </div>

    <button type="submit" class="btn btn-success">âœ… Ajouter l'observation</button>
  </form>
</div>
</body>
</html>
